{"ast":null,"code":"import { ChartElement, BoxElement, Box, TextBox, FloatElement } from '../../core';\nimport LegendLayout from './legend-layout';\nimport LegendItem from './legend-item';\nimport { TOP, RIGHT, BOTTOM, LEFT, CENTER, X, Y, BLACK } from '../../common/constants';\nimport { deepExtend, defined, getTemplate, getSpacing, inArray, setDefaultOptions } from '../../common';\nvar HORIZONTAL = \"horizontal\";\nvar POINTER = \"pointer\";\nvar CUSTOM = \"custom\";\n\nvar Legend = function (ChartElement) {\n  function Legend(options, chartService) {\n    if (chartService === void 0) chartService = {};\n    ChartElement.call(this, options);\n    this.chartService = chartService;\n\n    if (!inArray(this.options.position, [TOP, RIGHT, BOTTOM, LEFT, CUSTOM])) {\n      this.options.position = RIGHT;\n    }\n\n    this.createContainers();\n    this.createLegendTitle(options.title);\n    this.createItems();\n  }\n\n  if (ChartElement) Legend.__proto__ = ChartElement;\n  Legend.prototype = Object.create(ChartElement && ChartElement.prototype);\n  Legend.prototype.constructor = Legend;\n\n  Legend.prototype.createContainers = function createContainers() {\n    var options = this.options;\n    var position = options.position;\n    var userAlign = options.align;\n    var align = position;\n    var vAlign = CENTER;\n\n    if (position === CUSTOM) {\n      align = LEFT;\n    } else if (inArray(position, [TOP, BOTTOM])) {\n      if (userAlign === \"start\") {\n        align = LEFT;\n      } else if (userAlign === \"end\") {\n        align = RIGHT;\n      } else {\n        align = CENTER;\n      }\n\n      vAlign = position;\n    } else if (userAlign) {\n      if (userAlign === \"start\") {\n        vAlign = TOP;\n      } else if (userAlign === \"end\") {\n        vAlign = BOTTOM;\n      }\n    }\n\n    this.container = new BoxElement({\n      margin: options.margin,\n      padding: options.padding,\n      background: options.background,\n      border: options.border,\n      vAlign: vAlign,\n      align: align,\n      zIndex: options.zIndex,\n      shrinkToFit: true\n    });\n\n    if (this.hasTitle()) {\n      this.itemsContainer = new BoxElement({\n        vAlign: vAlign,\n        align: align,\n        zIndex: options.zIndex,\n        shrinkToFit: true\n      });\n    } else {\n      this.itemsContainer = this.container;\n    }\n\n    this.append(this.container);\n  };\n\n  Legend.prototype.createItems = function createItems() {\n    var chartService = this.getService();\n    var options = this.options;\n    var vertical = this.isVertical();\n    var innerElement = new LegendLayout({\n      vertical: vertical,\n      spacing: options.spacing,\n      rtl: chartService.rtl\n    }, chartService);\n    var items = options.items;\n\n    if (options.reverse) {\n      items = items.slice(0).reverse();\n    }\n\n    var count = items.length;\n\n    for (var i = 0; i < count; i++) {\n      var item = items[i];\n      innerElement.append(new LegendItem(deepExtend({}, {\n        markers: options.markers,\n        labels: options.labels,\n        rtl: chartService.rtl\n      }, options.item, item)));\n    }\n\n    innerElement.render();\n    this.itemsContainer.append(innerElement);\n  };\n\n  Legend.prototype.isVertical = function isVertical() {\n    var ref = this.options;\n    var orientation = ref.orientation;\n    var position = ref.position;\n    var vertical = position === CUSTOM && orientation !== HORIZONTAL || (defined(orientation) ? orientation !== HORIZONTAL : inArray(position, [LEFT, RIGHT]));\n    return vertical;\n  };\n\n  Legend.prototype.hasItems = function hasItems() {\n    return this.container.children[0].children.length > 0;\n  };\n\n  Legend.prototype.reflow = function reflow(targetBox) {\n    var options = this.options;\n    var legendBox = targetBox.clone();\n\n    if (!this.hasItems()) {\n      this.box = legendBox;\n      return;\n    }\n\n    if (options.position === CUSTOM) {\n      this.containerCustomReflow(legendBox);\n      this.box = legendBox;\n    } else {\n      this.containerReflow(legendBox);\n    }\n\n    if (this.hasTitle()) {\n      this.title.reflow(new Box(this.container.box.x1, this.title.box.y1, this.container.box.x2, this.title.box.y2));\n    }\n  };\n\n  Legend.prototype.containerReflow = function containerReflow(targetBox) {\n    var ref = this;\n    var options = ref.options;\n    var container = ref.container;\n    var position = options.position;\n    var width = options.width;\n    var height = options.height;\n    var pos = position === TOP || position === BOTTOM ? X : Y;\n    var vertical = this.isVertical();\n    var alignTarget = targetBox.clone();\n    var containerBox = targetBox.clone();\n\n    if (position === LEFT || position === RIGHT) {\n      containerBox.y1 = alignTarget.y1 = 0;\n    }\n\n    if (vertical && height) {\n      containerBox.y2 = containerBox.y1 + height;\n      containerBox.align(alignTarget, Y, container.options.vAlign);\n    } else if (!vertical && width) {\n      containerBox.x2 = containerBox.x1 + width;\n      containerBox.align(alignTarget, X, container.options.align);\n    }\n\n    container.reflow(containerBox);\n    containerBox = container.box;\n    var box = containerBox.clone();\n\n    if (options.offsetX || options.offsetY) {\n      containerBox.translate(options.offsetX, options.offsetY);\n      container.reflow(containerBox);\n    }\n\n    box[pos + 1] = targetBox[pos + 1];\n    box[pos + 2] = targetBox[pos + 2];\n    this.box = box;\n  };\n\n  Legend.prototype.containerCustomReflow = function containerCustomReflow(targetBox) {\n    var ref = this;\n    var options = ref.options;\n    var container = ref.container;\n    var offsetX = options.offsetX;\n    var offsetY = options.offsetY;\n    var width = options.width;\n    var height = options.height;\n    var vertical = this.isVertical();\n    var containerBox = targetBox.clone();\n\n    if (vertical && height) {\n      containerBox.y2 = containerBox.y1 + height;\n    } else if (!vertical && width) {\n      containerBox.x2 = containerBox.x1 + width;\n    }\n\n    container.reflow(containerBox);\n    containerBox = container.box;\n    container.reflow(new Box(offsetX, offsetY, offsetX + containerBox.width(), offsetY + containerBox.height()));\n  };\n\n  Legend.prototype.renderVisual = function renderVisual() {\n    if (this.hasItems()) {\n      ChartElement.prototype.renderVisual.call(this);\n    }\n  };\n\n  Legend.prototype.createLegendTitle = function createLegendTitle(title) {\n    var titleOptions = deepExtend({}, {\n      color: BLACK,\n      position: TOP,\n      align: CENTER\n    }, title);\n    var text = titleOptions.text;\n\n    if (!title || title.visible === false) {\n      return;\n    }\n\n    if (defined(titleOptions) && titleOptions.visible) {\n      var labelTemplate = getTemplate(titleOptions);\n\n      if (labelTemplate) {\n        text = labelTemplate({\n          text: text\n        });\n      } else if (titleOptions.format) {\n        text = this.chartService.format.auto(titleOptions.format, text);\n      }\n    }\n\n    this.title = new TextBox(text, titleOptions);\n    this.createTitleLayout();\n    this.appendTitleLayoutContent();\n  };\n\n  Legend.prototype.createTitleLayout = function createTitleLayout() {\n    this.layout = new FloatElement({\n      vertical: true,\n      wrap: false\n    });\n    this.container.append(this.layout);\n  };\n\n  Legend.prototype.hasTitle = function hasTitle() {\n    return Boolean(this.options.title && this.options.title.visible !== false);\n  };\n\n  Legend.prototype.appendTitleLayoutContent = function appendTitleLayoutContent() {\n    var options = this.options;\n\n    if (options.title.position === BOTTOM) {\n      this.layout.append(this.itemsContainer);\n      this.layout.append(this.title);\n    } else {\n      this.layout.append(this.title);\n      this.layout.append(this.itemsContainer);\n    }\n  };\n\n  return Legend;\n}(ChartElement);\n\nsetDefaultOptions(Legend, {\n  position: RIGHT,\n  items: [],\n  offsetX: 0,\n  offsetY: 0,\n  margin: getSpacing(5),\n  padding: getSpacing(5),\n  border: {\n    color: BLACK,\n    width: 0\n  },\n  item: {\n    cursor: POINTER,\n    spacing: 6\n  },\n  spacing: 6,\n  background: \"\",\n  zIndex: 1,\n  markers: {\n    border: {\n      width: 0\n    },\n    width: 15,\n    height: 3,\n    type: \"rect\",\n    align: LEFT,\n    vAlign: CENTER\n  }\n});\nexport default Legend;","map":{"version":3,"sources":["/Users/rishikoul/Desktop/interview/frontend/node_modules/@progress/kendo-charts/dist/es/chart/legend/legend.js"],"names":["ChartElement","BoxElement","Box","TextBox","FloatElement","LegendLayout","LegendItem","TOP","RIGHT","BOTTOM","LEFT","CENTER","X","Y","BLACK","deepExtend","defined","getTemplate","getSpacing","inArray","setDefaultOptions","HORIZONTAL","POINTER","CUSTOM","Legend","options","chartService","call","position","createContainers","createLegendTitle","title","createItems","__proto__","prototype","Object","create","constructor","userAlign","align","vAlign","container","margin","padding","background","border","zIndex","shrinkToFit","hasTitle","itemsContainer","append","getService","vertical","isVertical","innerElement","spacing","rtl","items","reverse","slice","count","length","i","item","markers","labels","render","ref","orientation","hasItems","children","reflow","targetBox","legendBox","clone","box","containerCustomReflow","containerReflow","x1","y1","x2","y2","width","height","pos","alignTarget","containerBox","offsetX","offsetY","translate","renderVisual","titleOptions","color","text","visible","labelTemplate","format","auto","createTitleLayout","appendTitleLayoutContent","layout","wrap","Boolean","cursor","type"],"mappings":"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","sourcesContent":["\nimport { ChartElement, BoxElement, Box, TextBox, FloatElement } from '../../core';\nimport LegendLayout from './legend-layout';\nimport LegendItem from './legend-item';\n\nimport { TOP, RIGHT, BOTTOM, LEFT, CENTER, X, Y, BLACK } from '../../common/constants';\nimport { deepExtend, defined, getTemplate, getSpacing, inArray, setDefaultOptions } from '../../common';\n\nvar HORIZONTAL = \"horizontal\";\nvar POINTER = \"pointer\";\nvar CUSTOM = \"custom\";\n\nvar Legend = (function (ChartElement) {\n    function Legend(options, chartService) {\n        if ( chartService === void 0 ) chartService = {};\n\n        ChartElement.call(this, options);\n\n        this.chartService = chartService;\n\n        if (!inArray(this.options.position, [ TOP, RIGHT, BOTTOM, LEFT, CUSTOM ])) {\n            this.options.position = RIGHT;\n        }\n\n        this.createContainers();\n\n        this.createLegendTitle(options.title);\n\n        this.createItems();\n    }\n\n    if ( ChartElement ) Legend.__proto__ = ChartElement;\n    Legend.prototype = Object.create( ChartElement && ChartElement.prototype );\n    Legend.prototype.constructor = Legend;\n\n    Legend.prototype.createContainers = function createContainers () {\n        var options = this.options;\n        var position = options.position;\n        var userAlign = options.align;\n        var align = position;\n        var vAlign = CENTER;\n\n        if (position === CUSTOM) {\n            align = LEFT;\n        } else if (inArray(position, [ TOP, BOTTOM ])) {\n            if (userAlign === \"start\") {\n                align = LEFT;\n            } else if (userAlign === \"end\") {\n                align = RIGHT;\n            } else {\n                align = CENTER;\n            }\n            vAlign = position;\n        } else if (userAlign) {\n            if (userAlign === \"start\") {\n                vAlign = TOP;\n            } else if (userAlign === \"end\") {\n                vAlign = BOTTOM;\n            }\n        }\n\n        this.container = new BoxElement({\n            margin: options.margin,\n            padding: options.padding,\n            background: options.background,\n            border: options.border,\n            vAlign: vAlign,\n            align: align,\n            zIndex: options.zIndex,\n            shrinkToFit: true\n        });\n\n        if (this.hasTitle()) {\n            this.itemsContainer = new BoxElement({\n                vAlign: vAlign,\n                align: align,\n                zIndex: options.zIndex,\n                shrinkToFit: true\n            });\n        } else {\n            this.itemsContainer = this.container;\n        }\n\n        this.append(this.container);\n    };\n\n    Legend.prototype.createItems = function createItems () {\n        var chartService = this.getService();\n        var options = this.options;\n        var vertical = this.isVertical();\n        var innerElement = new LegendLayout({\n            vertical: vertical,\n            spacing: options.spacing,\n            rtl: chartService.rtl\n        }, chartService);\n        var items = options.items;\n\n        if (options.reverse) {\n            items = items.slice(0).reverse();\n        }\n\n        var count = items.length;\n\n        for (var i = 0; i < count; i++) {\n            var item = items[i];\n\n            innerElement.append(new LegendItem(deepExtend({}, {\n                markers: options.markers,\n                labels: options.labels,\n                rtl: chartService.rtl\n            }, options.item, item)));\n        }\n\n        innerElement.render();\n        this.itemsContainer.append(innerElement);\n    };\n\n    Legend.prototype.isVertical = function isVertical () {\n        var ref = this.options;\n        var orientation = ref.orientation;\n        var position = ref.position;\n        var vertical = (position === CUSTOM && orientation !== HORIZONTAL) ||\n               (defined(orientation) ? orientation !== HORIZONTAL : inArray(position, [ LEFT, RIGHT ]));\n\n        return vertical;\n    };\n\n    Legend.prototype.hasItems = function hasItems () {\n        return this.container.children[0].children.length > 0;\n    };\n\n    Legend.prototype.reflow = function reflow (targetBox) {\n        var options = this.options;\n        var legendBox = targetBox.clone();\n\n        if (!this.hasItems()) {\n            this.box = legendBox;\n            return;\n        }\n\n        if (options.position === CUSTOM) {\n            this.containerCustomReflow(legendBox);\n            this.box = legendBox;\n        } else {\n            this.containerReflow(legendBox);\n        }\n\n        if (this.hasTitle()) {\n            this.title.reflow(new Box(this.container.box.x1, this.title.box.y1, this.container.box.x2, this.title.box.y2));\n        }\n    };\n\n    Legend.prototype.containerReflow = function containerReflow (targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var container = ref.container;\n        var position = options.position;\n        var width = options.width;\n        var height = options.height;\n        var pos = position === TOP || position === BOTTOM ? X : Y;\n        var vertical = this.isVertical();\n        var alignTarget = targetBox.clone();\n        var containerBox = targetBox.clone();\n\n        if (position === LEFT || position === RIGHT) {\n            containerBox.y1 = alignTarget.y1 = 0;\n        }\n\n        if (vertical && height) {\n            containerBox.y2 = containerBox.y1 + height;\n            containerBox.align(alignTarget, Y, container.options.vAlign);\n        } else if (!vertical && width) {\n            containerBox.x2 = containerBox.x1 + width;\n            containerBox.align(alignTarget, X, container.options.align);\n        }\n\n        container.reflow(containerBox);\n        containerBox = container.box;\n\n        var box = containerBox.clone();\n\n        if (options.offsetX || options.offsetY) {\n            containerBox.translate(options.offsetX, options.offsetY);\n            container.reflow(containerBox);\n        }\n\n        box[pos + 1] = targetBox[pos + 1];\n        box[pos + 2] = targetBox[pos + 2];\n\n        this.box = box;\n    };\n\n    Legend.prototype.containerCustomReflow = function containerCustomReflow (targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var container = ref.container;\n        var offsetX = options.offsetX;\n        var offsetY = options.offsetY;\n        var width = options.width;\n        var height = options.height;\n        var vertical = this.isVertical();\n        var containerBox = targetBox.clone();\n\n        if (vertical && height) {\n            containerBox.y2 = containerBox.y1 + height;\n        } else if (!vertical && width) {\n            containerBox.x2 = containerBox.x1 + width;\n        }\n        container.reflow(containerBox);\n        containerBox = container.box;\n\n        container.reflow(new Box(\n            offsetX, offsetY,\n            offsetX + containerBox.width(), offsetY + containerBox.height()\n        ));\n    };\n\n    Legend.prototype.renderVisual = function renderVisual () {\n        if (this.hasItems()) {\n            ChartElement.prototype.renderVisual.call(this);\n        }\n    };\n\n    Legend.prototype.createLegendTitle = function createLegendTitle (title) {\n        var titleOptions = deepExtend({}, {\n            color: BLACK,\n            position: TOP,\n            align: CENTER\n        }, title);\n        var text = titleOptions.text;\n\n        if (!title || title.visible === false) {\n            return;\n        }\n\n        if (defined(titleOptions) && titleOptions.visible) {\n            var labelTemplate = getTemplate(titleOptions);\n            if (labelTemplate) {\n                text = labelTemplate({ text: text });\n            } else if (titleOptions.format) {\n                text = this.chartService.format.auto(titleOptions.format, text);\n            }\n        }\n\n        this.title = new TextBox(text, titleOptions);\n\n        this.createTitleLayout();\n\n        this.appendTitleLayoutContent();\n    };\n\n    Legend.prototype.createTitleLayout = function createTitleLayout () {\n        this.layout = new FloatElement({\n            vertical: true,\n            wrap: false\n        });\n\n        this.container.append(this.layout);\n    };\n\n    Legend.prototype.hasTitle = function hasTitle () {\n        return Boolean(this.options.title && this.options.title.visible !== false);\n    };\n\n    Legend.prototype.appendTitleLayoutContent = function appendTitleLayoutContent () {\n        var options = this.options;\n\n        if (options.title.position === BOTTOM) {\n            this.layout.append(this.itemsContainer);\n            this.layout.append(this.title);\n        } else {\n            this.layout.append(this.title);\n            this.layout.append(this.itemsContainer);\n        }\n    };\n\n    return Legend;\n}(ChartElement));\n\nsetDefaultOptions(Legend, {\n    position: RIGHT,\n    items: [],\n    offsetX: 0,\n    offsetY: 0,\n    margin: getSpacing(5),\n    padding: getSpacing(5),\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    item: {\n        cursor: POINTER,\n        spacing: 6\n    },\n    spacing: 6,\n    background: \"\",\n    zIndex: 1,\n    markers: {\n        border: {\n            width: 0\n        },\n        width: 15,\n        height: 3,\n        type: \"rect\",\n        align: LEFT,\n        vAlign: CENTER\n    }\n});\n\nexport default Legend;\n"]},"metadata":{},"sourceType":"module"}